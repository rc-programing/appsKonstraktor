!function(window,$,undefined){let baseUrl=window.location.origin;function allData(url){const promise=axios.get(url),dataPromise=promise.then(response=>response.data);return dataPromise}function serialize(form){let requestArray=[];return form.querySelectorAll("[name]").forEach(elem=>{requestArray.push(elem.name+"="+elem.value)}),requestArray.length>0&&requestArray.join("&")}function formatRupiah(angka,prefix){var number_string,split=angka.replace(/[^,\d]/g,"").toString().split(","),sisa=split[0].length%3,rupiah=split[0].substr(0,sisa),ribuan=split[0].substr(sisa).match(/\d{3}/gi);return ribuan&&(separator=sisa?".":"",rupiah+=separator+ribuan.join(".")),rupiah=null!=split[1]?rupiah+","+split[1]:rupiah,null==prefix?rupiah:rupiah?"Rp. "+rupiah:""}function isNumberKey(evt){key=evt.which||evt.keyCode;var charStr=String.fromCharCode(key);188!=key&&8!=key&&17!=key&&86!=key&67!=key&&(key<48||key>57)&&evt.preventDefault()}let modalPengeluaran=document.querySelector("#showModalTambahPengeluaran");null!=modalPengeluaran&&(modalPengeluaran.onclick=function(){document.querySelector("#title_pengeluaran").innerHTML="Tambah Pengeluaran",$("#modal-pengeluaran").modal("show")});let statusPembayaran=document.querySelector("#statusPembayaran");null!=statusPembayaran&&(statusPembayaran.onclick=function(){this.checked?this.value=0:this.value=1,console.log(this.value)});let keyupTotal=document.querySelector("input[name='total']");null!=keyupTotal&&(keyupTotal.onkeyup=function(e){this.value=formatRupiah(this.value,"Rp. ")},keyupTotal.onkeydown=function(event){return isNumberKey(event)}),Array.from(document.querySelectorAll(".showModalUbahPengeluaran")).forEach(e=>{e.dataset.onclickvalue=e.getAttribute("data-value"),e.onclick="",e.addEventListener("click",(function(){allData(baseUrl+"/admin/getPengeluaran/"+this.dataset.onclickvalue).then(data=>{let dataModal=data[0];document.querySelector("#title_pengeluaran").innerHTML="Ubah Pengeluaran",document.querySelector('input[name="nm_lengkap"]').value=dataModal.nm_lengkap,document.querySelector('textarea[name="jenis"]').value=dataModal.jenis,document.querySelector('input[name="alokasi"]').value=dataModal.alokasi,document.querySelector('input[name="total"]').value=formatRupiah(dataModal.total,"Rp. "),document.querySelector("form#formSimpanPengeluaran").setAttribute("action",baseUrl+"/admin/ubahPengeluaran/"+this.dataset.onclickvalue),$("#modal-pengeluaran").modal("show")}).catch(err=>console.log(err))}))}),Array.from(document.querySelectorAll(".showModalHapuspengeluaran")).forEach(e=>{e.dataset.onclickvalue=e.getAttribute("data-value"),e.onclick="",e.addEventListener("click",(function(){document.querySelector('input[name="id_pengeluaran"]').value=this.dataset.onclickvalue,document.querySelector("form#formHapusData").setAttribute("action",baseUrl+"/admin/hapusPengeluaran"),$("#modal-confirm").modal("show")}))});const formSimpanPengeluaran=document.querySelector("#formSimpanPengeluaran");null!=formSimpanPengeluaran&&formSimpanPengeluaran.addEventListener("submit",event=>{event.preventDefault();let action=formSimpanPengeluaran.getAttribute("action");serialized=serialize(formSimpanPengeluaran),axios.post(action,serialized).then((function(response){response.data.status?(toastr.success(response.data.msg),window.location.reload()):toastr.error(response.data.msg)}))});const formHapusPengeluaran=document.querySelector("#formHapusData");null!=formHapusPengeluaran&&formHapusPengeluaran.addEventListener("submit",event=>{event.preventDefault();let action=formHapusPengeluaran.getAttribute("action");serialized=serialize(formHapusPengeluaran),axios.post(action,serialized).then((function(response){response.data.status?(window.location.reload(),toastr.success(response.data.msg)):toastr.error(response.data.msg)}))})}(window,jQuery);